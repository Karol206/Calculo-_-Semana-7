<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Muebles Colaborativos — Conecta con Artesanos</title>
  <meta name="description" content="Tienda colaborativa de muebles personalizados. Conecta con artesanos locales, personaliza, cotiza y sigue tu pedido en tiempo real." />

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#0f1724; /* deep navy */
      --card:#0b1220;
      --muted:#94a3b8;
      --accent:#ffb86b; /* warm wood tone */
      --glass: rgba(255,255,255,0.04);
      --glass-2: rgba(255,255,255,0.02);
      --success:#34d399;
      --danger:#fb7185;
      font-family: 'Inter', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background: linear-gradient(180deg,var(--bg), #071024 80%);color: #e6eef8}
    .container{max-width:1200px;margin:36px auto;padding:24px}
    header{display:flex;gap:16px;align-items:center}
    .brand{display:flex;gap:12px;align-items:center}
    .logo{width:64px;height:64px;border-radius:12px;background:linear-gradient(135deg,#2b6cb0,var(--accent));display:flex;align-items:center;justify-content:center;font-weight:800;color:#081029;font-size:20px;box-shadow:0 6px 20px rgba(11,18,32,0.7)}
    h1{margin:0;font-size:20px}
    p.lead{color:var(--muted);margin:0}

    /* layout */
    .grid{display:grid;grid-template-columns: 1fr 360px;gap:20px;margin-top:24px}
    .card{background:linear-gradient(180deg,var(--card), rgba(11,18,32,0.6));border-radius:16px;padding:18px;box-shadow:0 10px 30px rgba(2,6,23,0.6)}

    /* product list */
    .products{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:16px}
    .product{border-radius:12px;padding:14px;background:linear-gradient(180deg,rgba(255,255,255,0.02),var(--glass));cursor:pointer;transition:transform .18s ease,box-shadow .18s ease}
    .product:hover{transform:translateY(-6px);box-shadow:0 12px 30px rgba(2,6,23,0.5)}
    .thumb{height:140px;border-radius:10px;background-size:cover;background-position:center;margin-bottom:12px}
    .meta{display:flex;justify-content:space-between;align-items:center}
    .muted{color:var(--muted);font-size:13px}

    /* customization panel */
    form .row{display:flex;gap:8px;margin-bottom:10px}
    label{font-size:13px;color:var(--muted);display:block;margin-bottom:6px}
    input[type=text],input[type=number],select,textarea{width:100%;padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit}
    input[type=range]{width:100%}

    .btn{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:10px;background:linear-gradient(90deg,var(--accent),#ffd8b8);color:#081029;font-weight:700;border:0;cursor:pointer}
    .ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:9px 12px;border-radius:10px;color:var(--muted);cursor:pointer}

    /* quote box */
    .quote{display:flex;flex-direction:column;gap:12px}
    .big{font-size:20px;font-weight:700}

    /* order tracking */
    .tracker{display:flex;flex-direction:column;gap:12px}
    .stage{display:flex;gap:12px;align-items:center}
    .dot{width:14px;height:14px;border-radius:50%;background:var(--glass-2);display:inline-block}
    .dot.on{background:var(--accent);box-shadow:0 6px 18px rgba(255,184,107,0.18)}
    .status{font-size:14px}

    /* artisans */
    .artisan{display:flex;gap:12px;align-items:center;padding:8px;border-radius:10px}
    .avatar{width:56px;height:56px;border-radius:12px;background:linear-gradient(135deg,#fef3c7,#ffd8b8);display:flex;align-items:center;justify-content:center;color:#2b2b2b;font-weight:700}

    /* community */
    .feed{display:flex;flex-direction:column;gap:12px}
    .post{padding:12px;border-radius:10px;background:linear-gradient(180deg,rgba(255,255,255,0.018),transparent)}

    footer{margin-top:28px;color:var(--muted);font-size:13px}

    /* responsive */
    @media (max-width:980px){
      .grid{grid-template-columns:1fr}
      .products{grid-template-columns:repeat(auto-fill,minmax(180px,1fr))}
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="brand">
        <div class="logo">MG</div>
        <div>
          <h1>Muebles Colaborativos</h1>
          <p class="lead">Conecta con artesanos locales — personaliza, cotiza y sigue tu pedido en tiempo real</p>
        </div>
      </div>
      <div style="margin-left:auto;display:flex;gap:10px;align-items:center">
        <button class="ghost" onclick="openCommunity()">Comunidad</button>
        <button class="ghost" onclick="openPortfolio()">Mi cuenta</button>
      </div>
    </header>

    <section class="grid">
      <main class="card">
        <h3>Modelos disponibles</h3>
        <div style="height:10px"></div>
        <div class="products" id="products"></div>

        <div style="height:18px"></div>
        <div class="card" style="background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);">
          <h4>Personalización rápida</h4>
          <form id="customForm" onsubmit="event.preventDefault();calculateQuote();">
            <div class="row">
              <div style="flex:1">
                <label>Modelo</label>
                <select id="modelSelect"></select>
              </div>
              <div style="width:140px">
                <label>Ancho (cm)</label>
                <input type="number" id="width" min="20" value="80">
              </div>
            </div>

            <div class="row">
              <div style="flex:1">
                <label>Material</label>
                <select id="material">
                  <option value="madera">Madera maciza</option>
                  <option value="contrachapado">Contrachapado + barniz</option>
                  <option value="metal">Estructura metálica</option>
                </select>
              </div>
              <div style="width:140px">
                <label>Acabado</label>
                <select id="finish">
                  <option value="natural">Natural</option>
                  <option value="lacado">Lacado</option>
                  <option value="pintado">Pintado</option>
                </select>
              </div>
            </div>

            <div class="row">
              <div style="flex:1">
                <label>Color / Tono</label>
                <input type="text" id="color" placeholder="p.ej. Roble claro, Grafito">
              </div>
              <div style="width:140px">
                <label>Unidades</label>
                <input type="number" id="qty" min="1" value="1">
              </div>
            </div>

            <div class="row">
              <div style="flex:1">
                <label>Notas para el artesano</label>
                <textarea id="notes" rows="2" placeholder="Detalles, uso, referencia visual..."></textarea>
              </div>
            </div>

            <div style="display:flex;gap:10px;align-items:center;margin-top:10px">
              <button class="btn" type="button" onclick="calculateQuote()">Obtener cotización</button>
              <button class="ghost" type="button" onclick="previewMock()">Vista previa</button>
            </div>
          </form>

          <div style="height:12px"></div>

          <div class="quote">
            <div class="big">Precio estimado: <span id="price">—</span></div>
            <div class="muted">Tiempo estimado de fabricación: <span id="eta">—</span></div>
            <div style="display:flex;gap:8px;margin-top:8px">
              <button class="btn" id="placeOrderBtn" onclick="placeOrder()" disabled>Pagar y encargar</button>
              <button class="ghost" onclick="saveQuote()">Guardar cotización</button>
            </div>
          </div>
        </div>

        <div style="height:18px"></div>

        <div class="card">
          <h4>Seguimiento del pedido</h4>
          <div id="trackerArea" class="tracker">
            <div class="muted">No hay pedidos activos.</div>
          </div>
        </div>

      </main>

      <aside class="card">
        <h4>Artesanos destacados</h4>
        <div id="artisans"></div>

        <div style="height:18px"></div>
        <h4>Comunidad y contenido</h4>
        <div class="muted">Historias, videos y mini-tutoriales</div>
        <div style="height:8px"></div>
        <div class="card" style="padding:10px;">
          <div style="display:flex;gap:8px;align-items:center;justify-content:space-between">
            <div>
              <strong>Último video</strong>
              <div class="muted">Proceso de un mueble en 60s</div>
            </div>
            <div>
              <button class="ghost" onclick="openSocial('youtube')">Ver</button>
            </div>
          </div>
        </div>

        <div style="height:12px"></div>
        <div class="card" style="padding:10px">
          <strong>Comparte</strong>
          <div style="height:8px"></div>
          <div style="display:flex;gap:8px">
            <button class="ghost" onclick="openSocial('instagram')">Instagram</button>
            <button class="ghost" onclick="openSocial('tiktok')">TikTok</button>
          </div>
        </div>

      </aside>
    </section>

    <footer>
      © <span id="year"></span> Muebles Colaborativos · Hecho para visibilizar talento local
    </footer>
  </div>

  <!-- Modal / Lightbox -->
  <div id="modal" style="position:fixed;inset:0;display:none;align-items:center;justify-content:center;backdrop-filter:blur(4px);z-index:80">
    <div style="width:640px;max-width:94%;background:linear-gradient(180deg,#071424,rgba(7,18,36,0.6));padding:18px;border-radius:14px;box-shadow:0 20px 60px rgba(2,6,23,0.7)">
      <div id="modalContent"></div>
      <div style="height:12px"></div>
      <div style="text-align:right"><button class="ghost" onclick="closeModal()">Cerrar</button></div>
    </div>
  </div>

  <script>
    // ---------------------------
    // Demo data (would come from API normally)
    // ---------------------------
    const PRODUCTS = [
      {id:'p1',name:'Mesa Minimalista',base:220,thumb:'https://images.unsplash.com/photo-1549187774-b4e9b0445b50?q=80&w=1200&auto=format&fit=crop&ixlib=rb-4.0.3&s=2f7b1b2f1c8d9a5b9f0b8d78a9c2'},
      {id:'p2',name:'Estantería Modular',base:180,thumb:'https://images.unsplash.com/photo-1600566751758-d88b8c4dfd2f?q=80&w=1200&auto=format&fit=crop&ixlib=rb-4.0.3&s=8b0f3a5b9c6f4fef2c3f6b1e2'},
      {id:'p3',name:'Silla Escandinava',base:95,thumb:'https://images.unsplash.com/photo-1582582494706-928b3b6b3b24?q=80&w=1200&auto=format&fit=crop&ixlib=rb-4.0.3&s=6d7f2f1b3514a1cbf2b7da9e'},
      {id:'p4',name:'Cama con Cabecero',base:450,thumb:'https://images.unsplash.com/photo-1505691723518-36a5f6b2c0b4?q=80&w=1200&auto=format&fit=crop&ixlib=rb-4.0.3&s=0d3a2e1e2f6a9e7c5d4b'},
    ];

    const ARTISANS = [
      {id:'a1',name:'Lucía R.',city:'Quito',rating:4.9,completed:128,avatarText:'LR'},
      {id:'a2',name:'Manuel G.',city:'Guayaquil',rating:4.8,completed:97,avatarText:'MG'},
      {id:'a3',name:'Sofía P.',city:'Cuenca',rating:4.7,completed:64,avatarText:'SP'},
    ];

    // simple storage keys
    const STORAGE_KEYS = {ARTISANS:'mc_artisans',ORDERS:'mc_orders',PORTFOLIO:'mc_portfolio',FEED:'mc_feed'};

    // initialize
    document.getElementById('year').textContent = new Date().getFullYear();
    function init(){
      // populate products
      const el = document.getElementById('products');
      PRODUCTS.forEach(p=>{
        const node = document.createElement('div'); node.className='product';
        node.innerHTML = `
          <div class="thumb" style="background-image:url('${p.thumb}')"></div>
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div>
              <strong>${p.name}</strong>
              <div class="muted">Desde $${p.base}</div>
            </div>
            <div>
              <button class="ghost" onclick="openQuick(${JSON.stringify(p).replace(/'/g,'\'')} )">Personalizar</button>
            </div>
          </div>`;
        node.onclick = ()=>openQuick(p);
        el.appendChild(node);
      });

      // model select
      const ms = document.getElementById('modelSelect');
      PRODUCTS.forEach(p=>ms.appendChild(new Option(p.name,p.id)));

      // artisans
      renderArtisans();

      // load persisted data
      if(!localStorage.getItem(STORAGE_KEYS.ARTISANS)){
        localStorage.setItem(STORAGE_KEYS.ARTISANS, JSON.stringify(ARTISANS));
      }
      if(!localStorage.getItem(STORAGE_KEYS.PORTFOLIO)) localStorage.setItem(STORAGE_KEYS.PORTFOLIO, JSON.stringify([]));
      if(!localStorage.getItem(STORAGE_KEYS.ORDERS)) localStorage.setItem(STORAGE_KEYS.ORDERS, JSON.stringify([]));
      if(!localStorage.getItem(STORAGE_KEYS.FEED)) localStorage.setItem(STORAGE_KEYS.FEED, JSON.stringify([
        {id:'f1',author:'Comunidad',text:'Bienvenido a la comunidad. Comparte fotos del proceso de tu mueble!',time:Date.now()-1000*60*60*24}
      ]));

      renderFeed();
      renderPortfolioPreview();
    }

    function renderArtisans(){
      const list = JSON.parse(localStorage.getItem(STORAGE_KEYS.ARTISANS) || '[]');
      const out = document.getElementById('artisans'); out.innerHTML='';
      list.forEach(a=>{
        const d = document.createElement('div'); d.className='artisan';
        d.innerHTML = `<div class="avatar">${a.avatarText}</div><div style="flex:1"><strong>${a.name}</strong><div class="muted">${a.city} · ★ ${a.rating} · ${a.completed} pedidos</div></div><div><button class="ghost" onclick="viewPortfolio('${a.id}')">Ver</button></div>`;
        out.appendChild(d);
      });
    }

    function openQuick(p){
      document.getElementById('modelSelect').value = p.id;
      const content = `
        <h3>Personalizar: ${p.name}</h3>
        <div class="muted">Precio base: $${p.base}</div>
        <div style="height:10px"></div>
        <div style="display:flex;gap:8px;margin-top:8px">
          <button class="btn" onclick="document.getElementById('width').value=80;closeModal()">Usar medidas estándar</button>
          <button class="ghost" onclick="closeModal()">Cerrar</button>
        </div>
      `;
      showModal(content);
    }

    function showModal(html){document.getElementById('modalContent').innerHTML = html; document.getElementById('modal').style.display='flex';}
    function closeModal(){document.getElementById('modal').style.display='none';}

    // Quote calculator — simple formula: base * (width/80) * materialFactor * finishFactor * qty + fixed
    function calculateQuote(){
      const modelId = document.getElementById('modelSelect').value;
      const product = PRODUCTS.find(p=>p.id===modelId) || PRODUCTS[0];
      const width = Number(document.getElementById('width').value) || 80;
      const material = document.getElementById('material').value;
      const finish = document.getElementById('finish').value;
      const qty = Number(document.getElementById('qty').value) || 1;
      const notes = document.getElementById('notes').value || '';

      const materialFactor = ({madera:1.25,contrachapado:0.9,metal:1.45}[material] || 1);
      const finishFactor = ({natural:1,lacado:1.12,pintado:1.18}[finish] || 1);
      const sizeFactor = width/80;
      const base = product.base;
      const price = Math.round((base * sizeFactor * materialFactor * finishFactor) * qty + 20); // + fixed handling
      document.getElementById('price').textContent = `$${price}`;

      // ETA estimate
      const etaDays = Math.round(7 * sizeFactor * materialFactor);
      document.getElementById('eta').textContent = `${etaDays} días hábiles`;

      // enable order
      const btn = document.getElementById('placeOrderBtn'); btn.disabled=false; btn.dataset.quote = price; btn.dataset.eta = etaDays; btn.dataset.payload = JSON.stringify({productId:product.id,productName:product.name,width,material,finish,qty,notes,price,etaDays});

      return {price,etaDays};
    }

    function previewMock(){
      const modelId = document.getElementById('modelSelect').value;
      const product = PRODUCTS.find(p=>p.id===modelId) || PRODUCTS[0];
      showModal(`<h3>Vista previa rápida</h3><div style="display:flex;gap:12px"><div style="flex:1"><div class="thumb" style="height:180px;background-image:url('${product.thumb}')"></div></div><div style="flex:1"><strong>${product.name}</strong><div class="muted">Simula cómo quedará con tus elecciones.</div></div></div>`);
    }

    // Place order -> simulate payment -> assign artisan -> create tracking
    function placeOrder(){
      const btn = document.getElementById('placeOrderBtn');
      if(btn.disabled) return;
      const payload = JSON.parse(btn.dataset.payload || '{}');
      // open payment modal (simulated)
      showModal(`<h3>Pagar $${payload.price}</h3><div class="muted">Simulación de pasarela de pago</div><div style="height:12px"></div><div style="display:flex;gap:8px"><button class="btn" onclick="completePayment()">Pagar con tarjeta</button><button class="ghost" onclick="closeModal()">Cancelar</button></div>`);

      // store pending payment
      sessionStorage.setItem('mc_pending', JSON.stringify(payload));
    }

    function completePayment(){
      const pending = JSON.parse(sessionStorage.getItem('mc_pending')||'null');
      if(!pending){closeModal();alert('No hay pago pendiente.');return}
      // mark as paid
      pending.paid = true; pending.orderId = 'ORD'+Date.now(); pending.created = Date.now();

      // assign artisan (simple round-robin based on least completed)
      const artisans = JSON.parse(localStorage.getItem(STORAGE_KEYS.ARTISANS)||'[]');
      artisans.sort((a,b)=>a.completed-b.completed);
      const artisan = artisans[0];
      pending.artisan = artisan; pending.status = 'confirmado'; pending.stages = [
        {k:'confirmado',t:Date.now(),label:'Pedido confirmado'},
        {k:'en_produccion',t:null,label:'En producción'},
        {k:'en_envio',t:null,label:'En envío'},
        {k:'entregado',t:null,label:'Entregado'}
      ];

      // persist order
      const orders = JSON.parse(localStorage.getItem(STORAGE_KEYS.ORDERS)||'[]');
      orders.push(pending); localStorage.setItem(STORAGE_KEYS.ORDERS,JSON.stringify(orders));

      // update artisan stats
      artisan.completed += 1; localStorage.setItem(STORAGE_KEYS.ARTISANS, JSON.stringify(artisans));
      renderArtisans();

      // close modal and start tracking
      closeModal();
      renderTracker(pending);

      // simulate production timeline updates (for demo purposes)
      simulateProgress(pending.orderId);

      // add to artisan portfolio automatically when completed (simulated later)
      sessionStorage.removeItem('mc_pending');
      alert(`Pago realizado. Tu pedido ${pending.orderId} fue asignado a ${artisan.name}.`);
    }

    function renderTracker(order){
      const tracker = document.getElementById('trackerArea'); tracker.innerHTML='';
      const stages = order.stages || [];
      stages.forEach(s=>{
        const div = document.createElement('div'); div.className='stage';
        div.innerHTML = `<div class="dot ${s.t? 'on':''}"></div><div class="status"><strong>${s.label}</strong><div class="muted">${s.t? new Date(s.t).toLocaleString(): 'Pendiente'}</div></div>`;
        tracker.appendChild(div);
      });
    }

    function simulateProgress(orderId){
      // progress steps every 6 seconds (demo); in production updates come from artisans
      const interval = setInterval(()=>{
        const orders = JSON.parse(localStorage.getItem(STORAGE_KEYS.ORDERS)||'[]');
        const ord = orders.find(o=>o.orderId===orderId);
        if(!ord) return clearInterval(interval);
        const next = ord.stages.find(s=>!s.t);
        if(next){ next.t = Date.now(); ord.status = next.k; localStorage.setItem(STORAGE_KEYS.ORDERS, JSON.stringify(orders)); renderTracker(ord);
          // if delivered, finalize
          if(next.k==='entregado'){
            clearInterval(interval);
            finalizeOrder(ord);
          }
        }
      },6000);
    }

    function finalizeOrder(order){
      // add item to artisan portfolio and create review placeholder
      const portfolio = JSON.parse(localStorage.getItem(STORAGE_KEYS.PORTFOLIO)||'[]');
      portfolio.push({id:'pf'+Date.now(),artisanId:order.artisan.id,product:order.productName,photo:PRODUCTS.find(p=>p.id===order.productId).thumb,review:{user:'Cliente anónimo',rating:5,text:'Excelente trabajo.'},date:Date.now()});
      localStorage.setItem(STORAGE_KEYS.PORTFOLIO, JSON.stringify(portfolio));
      renderPortfolioPreview();

      // notify user (demo)
      alert(`Tu pedido ${order.orderId} ha sido entregado. ¡Gracias!`);
    }

    function viewPortfolio(artisanId){
      const portfolio = JSON.parse(localStorage.getItem(STORAGE_KEYS.PORTFOLIO)||'[]').filter(p=>p.artisanId===artisanId);
      let html = `<h3>Portafolio</h3>`;
      if(!portfolio.length) html += `<div class="muted">Aún no hay muebles terminados en el portafolio.</div>`;
      portfolio.forEach(p=>{
        html += `<div style="display:flex;gap:10px;align-items:center;margin-top:10px"><div style="width:80px;height:60px;background-image:url('${p.photo}');background-size:cover;border-radius:8px"></div><div><strong>${p.product}</strong><div class="muted">${p.review.rating} ★ — ${p.review.text}</div></div></div>`;
      });
      showModal(html);
    }

    function renderPortfolioPreview(){
      // for user account quick preview (not full profile)
      const port = JSON.parse(localStorage.getItem(STORAGE_KEYS.PORTFOLIO)||'[]');
      // not shown in main UI for brevity — kept for modal access
    }

    // Community feed
    function renderFeed(){
      const feed = JSON.parse(localStorage.getItem(STORAGE_KEYS.FEED)||'[]');
      const container = document.getElementById('products').parentElement.querySelector('#fake');
      // we'll render under community modal when opened
    }

    function openCommunity(){
      const feed = JSON.parse(localStorage.getItem(STORAGE_KEYS.FEED)||'[]');
      let html = `<h3>Comunidad</h3><div style="height:8px"></div><div style="display:flex;flex-direction:column;gap:8px">`;
      feed.slice().reverse().forEach(f=>{
        html += `<div class="post"><strong>${f.author}</strong> <div class="muted">${new Date(f.time).toLocaleString()}</div><div style="height:6px"></div><div>${f.text}</div></div>`;
      });
      html += `</div><div style="height:12px"></div><div><textarea id="newPost" rows="3" style="width:100%;border-radius:8px;padding:8px;background:transparent;border:1px solid rgba(255,255,255,0.04);"></textarea><div style="height:8px"></div><div style="text-align:right"><button class="btn" onclick="postToFeed()">Publicar</button></div></div>`;
      showModal(html);
    }

    function postToFeed(){
      const txt = document.getElementById('newPost').value.trim();
      if(!txt) return alert('Escribe algo antes de publicar.');
      const feed = JSON.parse(localStorage.getItem(STORAGE_KEYS.FEED)||'[]');
      feed.push({id:'f'+Date.now(),author:'Usuario',text:txt,time:Date.now()});
      localStorage.setItem(STORAGE_KEYS.FEED,JSON.stringify(feed));
      closeModal(); openCommunity();
    }

    function openPortfolio(){
      const portfolio = JSON.parse(localStorage.getItem(STORAGE_KEYS.PORTFOLIO)||'[]');
      let html = `<h3>Mi cuenta</h3><div class="muted">Portafolio de encargos terminados</div>`;
      if(!portfolio.length) html += `<div style="height:12px"></div><div class="muted">No tienes encargos terminados aún.</div>`;
      portfolio.slice().reverse().forEach(p=>{
        html += `<div style="display:flex;gap:12px;align-items:center;margin-top:10px"><div style="width:80px;height:60px;background-image:url('${p.photo}');background-size:cover;border-radius:8px"></div><div><strong>${p.product}</strong><div class="muted">Reseña: ${p.review.rating} ★ — ${p.review.text}</div></div></div>`;
      });
      showModal(html);
    }

    // Social open
    function openSocial(which){
      const urls = {instagram:'https://instagram.com',tiktok:'https://tiktok.com',youtube:'https://youtube.com'};
      window.open(urls[which],'_blank');
    }

    // Save quote to localStorage demo
    function saveQuote(){
      const price = document.getElementById('price').textContent;
      if(!price || price==='—') return alert('Genera la cotización primero.');
      const saved = JSON.parse(localStorage.getItem('mc_quotes')||'[]');
      saved.push({id:'q'+Date.now(),price,model:document.getElementById('modelSelect').value,when:Date.now()});
      localStorage.setItem('mc_quotes', JSON.stringify(saved));
      alert('Cotización guardada.');
    }

    // small utility
    function openModalWithHtml(html){showModal(html)}

    // initial call
    init();
  </script>
</body>
</html>
