<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Dominio y Rango de una Función</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #f0f4f8; }
    input, button { padding: 8px; font-size: 16px; margin: 5px 0; width: 100%; }
    #plot { width: 100%; height: 400px; }
  </style>
</head>
<body>
  <h2>Calculadora de Dominio y Rango</h2>
  <label>Escribe una función de x (por ejemplo: <code>Math.sin(x)</code> o <code>x*x - 2</code>):</label>
  <input id="funcInput" type="text" placeholder="Ej: Math.sqrt(x)">
  <button onclick="graficarFuncion()">Graficar y Calcular</button>

  <div id="plot"></div>
  <p><strong>Dominio:</strong> <span id="dominio"></span></p>
  <p><strong>Rango (estimado):</strong> <span id="rango"></span></p>

  <script>
    function graficarFuncion() {
      const expr = document.getElementById("funcInput").value;
      const xVals = [], yVals = [];

      for (let x = -50; x <= 50; x += 0.5) {
        try {
          const y = eval(expr.replace(/x/g, `(${x})`));
          if (isFinite(y)) {
            xVals.push(x);
            yVals.push(y);
          }
        } catch {}
      }

      const trace = { x: xVals, y: yVals, mode: 'lines', type: 'scatter' };
      Plotly.newPlot("plot", [trace], { margin: { t: 20 } });

      // Calcular dominio y rango estimado
      const dominio = `[${Math.min(...xVals).toFixed(2)}, ${Math.max(...xVals).toFixed(2)}]`;
      const rango = `[${Math.min(...yVals).toFixed(2)}, ${Math.max(...yVals).toFixed(2)}]`;
      document.getElementById("dominio").innerText = dominio;
      document.getElementById("rango").innerText = rango;
    }
  </script>
</body>
</html>
